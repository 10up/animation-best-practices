"use strict";(self.webpackChunkanimation=self.webpackChunkanimation||[]).push([[59],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),h=r,f=u["".concat(l,".").concat(h)]||u[h]||m[h]||i;return n?a.createElement(f,o(o({ref:t},c),{},{components:n})):a.createElement(f,o({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5291:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_label:"Performance"},o="Performance",s={unversionedId:"performance",id:"performance",title:"Performance",description:"Writing performant motion and animation is critical in crafting high quality user experiences. Below are several strategies that will help enhance performance when using motion.",source:"@site/guidelines/performance.md",sourceDirName:".",slug:"/performance",permalink:"/animation-best-practices/guidelines/performance",draft:!1,tags:[],version:"current",frontMatter:{sidebar_label:"Performance"},sidebar:"tutorialSidebar",previous:{title:"How & when to use animation",permalink:"/animation-best-practices/guidelines/how-and-when-to-use-animation"},next:{title:"Types of animation",permalink:"/animation-best-practices/guidelines/types-of-animation"}},l={},p=[{value:"CSS",id:"css",level:2},{value:"will-change",id:"will-change",level:3},{value:"CSS versus JavaScript",id:"css-versus-javascript",level:2},{value:"JavaScript",id:"javascript",level:2},{value:"React",id:"react",level:3}],c={toc:p};function m(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"performance"},"Performance"),(0,r.kt)("p",null,"Writing performant motion and animation is critical in crafting high quality user experiences. Below are several strategies that will help enhance performance when using motion."),(0,r.kt)("p",null,"For clean and reliable animation without jitters or stutters, maintain at least 60fps. To test FPS with animations, use chrome devtools performance tab (green bar\xa0at its highest point is 60fps)."),(0,r.kt)("p",null,"Keep in mind that different devices may have different framerates for their displays. Variable refresh, Apple's ProMotion, and high refresh rate displays can all play a factor in what framerate the browser actually animates at."),(0,r.kt)("p",null,"Excessive and simultaneous animations can cause performance issues. Additionally, if the browser is working excessively on other scripts while also attempting to animate various elements, this will also cause percieved performance issues. Consider moving scripts off the main thread with service workers, optimizing, or reducing the scripts being run."),(0,r.kt)("h2",{id:"css"},"CSS"),(0,r.kt)("p",null,"Simple animations (primarily using ",(0,r.kt)("inlineCode",{parentName:"p"},"transform")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"opacity"),") have the lowest impact on performance.\xa0"),(0,r.kt)("p",null,"For example, do not animate position using\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"top"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"right"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"bottom"),", or ",(0,r.kt)("inlineCode",{parentName:"p"},"left"),"\xa0properties or size using ",(0,r.kt)("inlineCode",{parentName:"p"},"width")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"height"),". Instead, use\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"transforms"),"\xa0for better performance. You can find a complete list of properties in CSS that trigger layout or paint and in which browsers at ",(0,r.kt)("a",{parentName:"p",href:"https://csstriggers.com/"},"CSS Triggers"),". Sticking with properties that only update the composite will yeild the best performance. Additionally, specifying which properties will transition with ",(0,r.kt)("inlineCode",{parentName:"p"},"transition-property")," can also help the browser optimize your transition."),(0,r.kt)("p",null,"Avoid things like:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-css"},"#menu li{\n  left: 0;\n  transition: all 1s ease-in-out;\n}\n#menu li:hover {\n  left: 10px\n}\n")),(0,r.kt)("h3",{id:"will-change"},"will-change"),(0,r.kt)("p",null,"Using\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"will-change"),"\xa0alerts the browser what you plan to animate and allocates resources appropriately and can enhance FPS and performance for a particular animation, but should be used with clear intent. When possible, do not use\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"will-change: auto"),"\xa0and instead use a specific value to the impending animation. Applying\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"will-change"),", however,\xa0 to too many elements on a page will over utilize browser resources and negatively impact performance. Therefore, use sparingly and/or use scripts to toggle\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"will-change"),"\xa0on or off before and after animation change occurs.\xa0"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.html5rocks.com/en/tutorials/speed/high-performance-animations/"},"https://www.html5rocks.com/en/tutorials/speed/high-performance-animations/")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/CSS/will-change"},"https://developer.mozilla.org/en-US/docs/Web/CSS/will-change"))),(0,r.kt)("h2",{id:"css-versus-javascript"},"CSS versus JavaScript"),(0,r.kt)("p",null,"It's a common belief that CSS animations are more performant than JavaScript animations. A few articles aimed to set the record straight (linked below)."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"If you're only animating simple state changes and need good mobile support, go for CSS (most cases)."),(0,r.kt)("li",{parentName:"ul"},"If you need more complex animations, use a JavaScript animation framework (such as GSAP or anime.js) or ",(0,r.kt)("inlineCode",{parentName:"li"},"requestAnimationFrame"),".")),(0,r.kt)("p",null,"For more reading on the topic, refer to these articles:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://greensock.com/css-performance"},"CSS animations performance: the untold story")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://css-tricks.com/myth-busting-css-animations-vs-javascript/"},"Myth Busting: CSS Animations vs. JavaScript")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://davidwalsh.name/css-js-animation"},"CSS vs. JS Animation: Which is Faster?")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/"},"Why Moving Elements With Translate() Is Better Than Pos:abs Top/left")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://developers.google.com/web/fundamentals/look-and-feel/animations/css-vs-javascript?hl=en"},"CSS vs JavaScript Animations"))),(0,r.kt)("h2",{id:"javascript"},"JavaScript"),(0,r.kt)("p",null,"Use\xa0",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame"},"requestAnimationFrame"),"\xa0over ",(0,r.kt)("inlineCode",{parentName:"p"},"setTimeout")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"setInterval")," to execute animation code for best performance. This enhances the animation by utilizing the frame rate of the user's device, in addition to finding the best time to actually run the function."),(0,r.kt)("h3",{id:"react"},"React"),(0,r.kt)("p",null,"Use the\xa0",(0,r.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/hooks-reference.html#uselayouteffect"},"useLayoutEffect"),", instead of useEffect, hook for better control and of component updates that affect motion (i.e. attaching a component ref, measuring height, etc). This allows the DOM to synchronously render, before the browser has a chance to paint. Since\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"useLayoutEffect"),"\xa0runs synchronously, any expensive computation will block the browser paint process and thus drop the frame rate. So, while\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"useLayoutEffect"),"\xa0is preferable for handling animations, it needs to be used wisely. A good example of using\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"useLayoutEffect"),"\xa0is to set the initial width and height of a component before the browser paints the element and before animating with css."))}m.isMDXComponent=!0}}]);